<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="DP_FILE" >
  <resultMap id="abatorgenerated_DpFileResult" class="com.synesoft.fisp.domain.model.DpFile" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Nov 12 09:56:26 CST 2013.
    -->
    <result column="FILE_ID" property="fileId" jdbcType="VARCHAR" />
    <result column="FILE_NAME" property="fileName" jdbcType="VARCHAR" />
    <result column="FILE_TYPE" property="fileType" jdbcType="VARCHAR" />
    <result column="DELIMITER" property="delimiter" jdbcType="VARCHAR" />
    <result column="FIXED_LEN_CFG" property="fixedLenCfg" jdbcType="VARCHAR" />
    <result column="FILE_ENCODING" property="fileEncoding" jdbcType="VARCHAR" />
    <result column="SROW_IGNR_NUM" property="srowIgnrNum" jdbcType="DECIMAL" />
    <result column="EROW_IGNR_NUM" property="erowIgnrNum" jdbcType="DECIMAL" />
    <result column="SHEET_NO" property="sheetNo" jdbcType="DECIMAL" />
    <result column="START_COLUMN" property="startColumn" jdbcType="DECIMAL" />
    <result column="END_COLUMN" property="endColumn" jdbcType="DECIMAL" />
    <result column="COMMIT_COUNT" property="commitCount" jdbcType="DECIMAL" />
    <result column="IO_FLAG" property="ioFlag" jdbcType="VARCHAR" />
    <result column="CUT_FLAG" property="cutFlag" jdbcType="VARCHAR" />
    <result column="COMMENTS" property="comments" jdbcType="VARCHAR" />
    <result column="CREATE_TIME" property="createTime" jdbcType="CHAR" />
    <result column="CREATE_USER" property="createUser" jdbcType="VARCHAR" />
    <result column="UPDATE_TIME" property="updateTime" jdbcType="CHAR" />
    <result column="UPDATE_USER" property="updateUser" jdbcType="VARCHAR" />
    <result column="RSV1" property="rsv1" jdbcType="VARCHAR" />
    <result column="RSV2" property="rsv2" jdbcType="VARCHAR" />
    <result column="RSV3" property="rsv3" jdbcType="VARCHAR" />
    <result column="RSV4" property="rsv4" jdbcType="VARCHAR" />
    <result column="RSV5" property="rsv5" jdbcType="VARCHAR" />
  </resultMap>
  
  <!-- query a piece of record -->
  <select id="selectByPrimaryKey" 
  		parameterClass="java.lang.String" resultMap="abatorgenerated_DpFileResult">
	SELECT 
		FILE_ID, FILE_NAME, FILE_TYPE, DELIMITER, FIXED_LEN_CFG, FILE_ENCODING, SROW_IGNR_NUM,
		EROW_IGNR_NUM, SHEET_NO, START_COLUMN, END_COLUMN, COMMIT_COUNT, IO_FLAG, CUT_FLAG, COMMENTS,
		CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, RSV1, RSV2, RSV3, RSV4, RSV5
	FROM
		DP_FILE
	WHERE
		FILE_ID = #value:VARCHAR#	  
  </select>
  
  <!-- query a piece of record -->
  <select id="selectByKey" 
  		parameterClass="java.lang.String" resultMap="abatorgenerated_DpFileResult">
	SELECT 
		FILE_ID, FILE_NAME, FILE_TYPE, DELIMITER, FIXED_LEN_CFG, FILE_ENCODING, SROW_IGNR_NUM,
		EROW_IGNR_NUM, SHEET_NO, START_COLUMN, END_COLUMN, COMMIT_COUNT, IO_FLAG, CUT_FLAG, COMMENTS,
		CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, RSV1, RSV2, RSV3, RSV4, RSV5
	FROM
		DP_FILE
	WHERE
		FILE_NAME = #value:VARCHAR#	  
  </select>
  
  <!-- query size of list -->
  <select id="selectQueryCounts" 
  		parameterClass="com.synesoft.fisp.domain.model.DpFile" resultClass="java.lang.Integer">
	SELECT 
		COUNT(*)
	FROM
		DP_FILE
    <dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="fileName" >
			LOWER(FILE_NAME) LIKE '%'||LOWER(#fileName#)||'%'
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="comments" >
			LOWER(COMMENTS) LIKE '%'||LOWER(#comments#)||'%'
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="fileType" >
			FILE_TYPE = #fileType:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="ioFlag" >
			IO_FLAG = #ioFlag:VARCHAR#
		</isNotEmpty>
	</dynamic>
  </select>
  
  <!-- query list -->
  <select id="selectQueryList" 
  		parameterClass="com.synesoft.fisp.domain.model.DpFile" resultMap="abatorgenerated_DpFileResult">
	SELECT 
		FILE_ID, FILE_NAME, FILE_TYPE, DELIMITER, FIXED_LEN_CFG, FILE_ENCODING, SROW_IGNR_NUM,
		EROW_IGNR_NUM, SHEET_NO, START_COLUMN, END_COLUMN, COMMIT_COUNT, IO_FLAG, CUT_FLAG, COMMENTS,
		CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, RSV1, RSV2, RSV3, RSV4, RSV5
	FROM
		DP_FILE
    <dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="fileName" >
			LOWER(FILE_NAME) LIKE LOWER('%'||#fileName#||'%')
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="comments" >
			LOWER(COMMENTS) LIKE LOWER('%'||#comments#||'%')
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="fileType" >
			FILE_TYPE = #fileType:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="ioFlag" >
			IO_FLAG = #ioFlag:VARCHAR#
		</isNotEmpty>
	</dynamic>
	ORDER BY 
		FILE_NAME
  </select>
  
  <!-- query name list -->
  <select id="selectList" 
  		parameterClass="java.lang.String" resultClass="java.lang.String">
	SELECT 
		FILE_NAME
	FROM
		DP_FILE
    <dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="value" >
			FILE_NAME LIKE #value#||'%'
		</isNotEmpty>
	</dynamic>
	ORDER BY 
		FILE_NAME
  </select>
  
  <!-- delete a piece of record -->
  <delete id="deleteByPrimaryKey" 
  		parameterClass="com.synesoft.fisp.domain.model.DpFile">
	DELETE FROM
		DP_FILE
	WHERE	
		FILE_ID = #fileId:VARCHAR# AND
		((UPDATE_TIME IS NULL AND
		UPDATE_USER IS NULL) OR
		(UPDATE_TIME = #updateTime:CHAR# AND 
		UPDATE_USER = #updateUser:VARCHAR#))
  </delete>
  
  <!-- insert a piece of record -->
  <insert id="insert" 
  		parameterClass="com.synesoft.fisp.domain.model.DpFile">
	INSERT INTO
		DP_FILE
	(
		FILE_ID, FILE_NAME, FILE_TYPE, DELIMITER, 
		FIXED_LEN_CFG, FILE_ENCODING, SROW_IGNR_NUM, EROW_IGNR_NUM, 
		SHEET_NO, START_COLUMN, END_COLUMN, COMMIT_COUNT, 
		IO_FLAG, CUT_FLAG, COMMENTS, CREATE_TIME, 
		CREATE_USER, UPDATE_TIME, UPDATE_USER, RSV1, RSV2, 
		RSV3, RSV4, RSV5
	) VALUES (
		#fileId:VARCHAR#, #fileName:VARCHAR#, #fileType:VARCHAR#, #delimiter:VARCHAR#,
      	#fixedLenCfg:VARCHAR#, #fileEncoding:VARCHAR#, #srowIgnrNum:DECIMAL#, #erowIgnrNum:DECIMAL#,
      	#sheetNo:DECIMAL#, #startColumn:DECIMAL#, #endColumn:DECIMAL#, #commitCount:DECIMAL#,
      	#ioFlag:VARCHAR#, #cutFlag:VARCHAR#, #comments:VARCHAR#, #createTime:CHAR#,
      	#createUser:VARCHAR#, #updateTime:CHAR#, #updateUser:VARCHAR#, #rsv1:VARCHAR#, #rsv2:VARCHAR#,
      	#rsv3:VARCHAR#, #rsv4:VARCHAR#, #rsv5:VARCHAR#
	)	
  </insert>
  
  <!-- update one record -->
  <update id="updateByPrimaryKey" 
  		parameterClass="com.synesoft.fisp.domain.model.vo.DpFileVO">
  	UPDATE
  		DP_FILE
    SET
		UPDATE_TIME = #updateTime:CHAR#, 
		UPDATE_USER = #updateUser:VARCHAR#
		<isNotEmpty prepend="," property="fileName" >
  			FILE_NAME = #fileName:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="," property="fileType" >
  			FILE_TYPE = #fileType:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="," property="delimiter" >
  			DELIMITER = #delimiter:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="," property="fixedLenCfg" >
  			FIXED_LEN_CFG = #fixedLenCfg:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="," property="fileEncoding" >
  			FILE_ENCODING = #fileEncoding:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="," property="ioFlag" >
  			IO_FLAG = #ioFlag:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="," property="srowIgnrNum" >
  			SROW_IGNR_NUM = #srowIgnrNum:DECIMAL#
		</isNotEmpty>
		<isNotEmpty prepend="," property="erowIgnrNum" >
  			EROW_IGNR_NUM = #erowIgnrNum:DECIMAL#
		</isNotEmpty>
		<isNotEmpty prepend="," property="commitCount" >
  			COMMIT_COUNT = #commitCount:DECIMAL#
		</isNotEmpty>
		<isNotEmpty prepend="," property="sheetNo" >
  			SHEET_NO = #sheetNo:DECIMAL#
		</isNotEmpty>
		<isNotEmpty prepend="," property="startColumn" >
  			START_COLUMN = #startColumn:DECIMAL#
		</isNotEmpty>
		<isNotEmpty prepend="," property="endColumn" >
  			END_COLUMN = #endColumn:DECIMAL#
		</isNotEmpty>
		<isNotEmpty prepend="," property="cutFlag" >
  			CUT_FLAG = #cutFlag:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="," property="comments" >
  			COMMENTS = #comments:VARCHAR#
		</isNotEmpty>
	WHERE
		FILE_ID = #fileId:VARCHAR# AND
		((UPDATE_TIME IS NULL AND
		UPDATE_USER IS NULL) OR
		(UPDATE_TIME = #oldUpdateTime:CHAR# AND 
		UPDATE_USER = #oldUpdateUser:VARCHAR#))
  </update>
  
  
</sqlMap>