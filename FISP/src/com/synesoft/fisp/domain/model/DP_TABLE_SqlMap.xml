<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="DP_TABLE" >
  <resultMap id="abatorgenerated_DpTableResult" class="com.synesoft.fisp.domain.model.DpTable" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Nov 12 09:56:07 CST 2013.
    -->
    <result column="TABLE_ID" property="tableId" jdbcType="VARCHAR" />
    <result column="TABLE_NAME" property="tableName" jdbcType="VARCHAR" />
    <result column="TABLE_DESC" property="tableDesc" jdbcType="VARCHAR" />
    <result column="COMMENTS" property="comments" jdbcType="VARCHAR" />
    <result column="CREATE_TIME" property="createTime" jdbcType="CHAR" />
    <result column="CREATE_USER" property="createUser" jdbcType="VARCHAR" />
    <result column="UPDATE_TIME" property="updateTime" jdbcType="CHAR" />
    <result column="UPDATE_USER" property="updateUser" jdbcType="VARCHAR" />
    <result column="RSV1" property="rsv1" jdbcType="VARCHAR" />
    <result column="RSV2" property="rsv2" jdbcType="VARCHAR" />
    <result column="RSV3" property="rsv3" jdbcType="VARCHAR" />
    <result column="RSV4" property="rsv4" jdbcType="VARCHAR" />
    <result column="RSV5" property="rsv5" jdbcType="VARCHAR" />
  </resultMap>

  <!-- query a piece of record -->
  <select id="selectByPrimaryKey" 
  		parameterClass="java.lang.String" resultMap="abatorgenerated_DpTableResult">
	SELECT 
		TABLE_ID, TABLE_NAME, TABLE_DESC, COMMENTS, 
		CREATE_TIME, CREATE_USER, UPDATE_TIME, 
		UPDATE_USER, RSV1, RSV2, RSV3, RSV4, RSV5
	FROM
		DP_TABLE
	WHERE
		TABLE_ID = #value:VARCHAR#	  
  </select>
  
  <!-- query record by logic key -->
  <select id="selectByKey" 
  		parameterClass="java.lang.String" resultMap="abatorgenerated_DpTableResult">
	SELECT 
		TABLE_ID, TABLE_NAME, TABLE_DESC, COMMENTS, 
		CREATE_TIME, CREATE_USER, UPDATE_TIME, 
		UPDATE_USER, RSV1, RSV2, RSV3, RSV4, RSV5
	FROM
		DP_TABLE
	WHERE
		TABLE_NAME = #value:VARCHAR#	  
  </select>
  
  <!-- query size of list -->
  <select id="selectQueryCounts" 
  		parameterClass="com.synesoft.fisp.domain.model.DpTable" resultClass="java.lang.Integer">
	SELECT 
		COUNT(*)
	FROM
		DP_TABLE
    <dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="tableName" >
			LOWER(TABLE_NAME) LIKE '%'||LOWER(#tableName#)||'%'
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="tableDesc" >
			LOWER(TABLE_DESC) LIKE '%'||LOWER(#tableDesc#)||'%'
		</isNotEmpty>
	</dynamic>
  </select>
  
  <!-- query list -->
  <select id="selectQueryList" 
  		parameterClass="com.synesoft.fisp.domain.model.DpTable" resultMap="abatorgenerated_DpTableResult">
	SELECT 
		TABLE_ID, TABLE_NAME, TABLE_DESC, COMMENTS, CREATE_TIME, CREATE_USER, UPDATE_TIME, 
		UPDATE_USER, RSV1, RSV2, RSV3, RSV4, RSV5
	FROM
		DP_TABLE
    <dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="tableName" >
			LOWER(TABLE_NAME) LIKE '%'||LOWER(#tableName#)||'%'
		</isNotEmpty>
		<isNotEmpty prepend="AND" property="tableDesc" >
			LOWER(TABLE_DESC) LIKE '%'||LOWER(#tableDesc#)||'%'
		</isNotEmpty>
	</dynamic>
	ORDER BY 
		TABLE_NAME
  </select>
  
  <!-- delete a piece of record -->
  <delete id="deleteByPrimaryKey" 
  		parameterClass="com.synesoft.fisp.domain.model.DpTable">
	DELETE FROM
		DP_TABLE
	WHERE	
		TABLE_ID = #tableId:VARCHAR# AND
		((UPDATE_TIME IS NULL AND
		UPDATE_USER IS NULL) OR
		(UPDATE_TIME = #updateTime:CHAR# AND 
		UPDATE_USER = #updateUser:VARCHAR#))
  </delete>
  
  <!-- insert a piece of record -->
  <insert id="insert" 
  		parameterClass="com.synesoft.fisp.domain.model.DpTable">
	INSERT INTO
		DP_TABLE
	(
		TABLE_ID, TABLE_NAME, TABLE_DESC, COMMENTS, 
		CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, 
		RSV1, RSV2, RSV3, RSV4, RSV5
	) VALUES (
		#tableId:VARCHAR#, #tableName:VARCHAR#, #tableDesc:VARCHAR#, #comments:VARCHAR#, 
		#createTime:CHAR#, #createUser:VARCHAR#, #updateTime:CHAR#, #updateUser:VARCHAR#, 
		#rsv1:VARCHAR#, #rsv2:VARCHAR#,	#rsv3:VARCHAR#, #rsv4:VARCHAR#, #rsv5:VARCHAR#
	)	
  </insert>
  
  <!-- update one record -->
  <update id="updateByPrimaryKey" 
  		parameterClass="com.synesoft.fisp.domain.model.vo.DpTableVO">
  	UPDATE
  		DP_TABLE
    SET
    	UPDATE_TIME = #updateTime:CHAR#,
		UPDATE_USER = #updateUser:VARCHAR#
		<isNotEmpty prepend="," property="tableDesc" >
  			TABLE_DESC = #tableDesc:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="," property="comments" >
  			COMMENTS = #comments:VARCHAR#
		</isNotEmpty>
	WHERE
		TABLE_ID = #tableId:VARCHAR# AND
		((UPDATE_TIME IS NULL AND
		UPDATE_USER IS NULL) OR
		(UPDATE_TIME = #oldUpdateTime:CHAR# AND 
		UPDATE_USER = #oldUpdateUser:VARCHAR#))
  </update>
  
  <select id="selectCounts" resultClass="java.lang.Integer"
		parameterClass="com.synesoft.fisp.domain.model.DpTable">
		select count(*) from DP_TABLE
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="tableName">
				trim(TABLE_NAME)
				like UPPER('%$tableName$%')
			</isNotEmpty>
			<isNotEmpty prepend="and" property="tableDesc">
				trim(TABLE_DESC) like '%$tableDesc$%'
			</isNotEmpty>
		</dynamic>
	</select>
	<select id="selectList" resultMap="abatorgenerated_DpTableResult"
		parameterClass="com.synesoft.fisp.domain.model.DpTable">
		select * from DP_TABLE
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="tableName">
				trim(TABLE_NAME)
				like UPPER('%$tableName$%')
			</isNotEmpty>
			<isNotEmpty prepend="and" property="tableDesc">
				trim(TABLE_DESC) like
				'%$tableDesc$%'
			</isNotEmpty>
		</dynamic>
	</select>
  
</sqlMap>