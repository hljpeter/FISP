<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="SYS_ROLE_FUNC" >
  <resultMap id="SysRoleFuncResult" class="com.synesoft.fisp.domain.model.SysRoleFunc" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Fri Nov 15 18:58:10 CST 2013.
    -->
    <result column="FUNC_ID" property="funcId" jdbcType="VARCHAR" />
    <result column="ROLE_ID" property="roleId" jdbcType="VARCHAR" />
    <result column="CREATE_TIME" property="createTime" jdbcType="CHAR" />
    <result column="CREATE_USER" property="createUser" jdbcType="VARCHAR" />
    <result column="UPDATE_TIME" property="updateTime" jdbcType="CHAR" />
    <result column="UPDATE_USER" property="updateUser" jdbcType="VARCHAR" />
    <result column="RSV1" property="rsv1" jdbcType="VARCHAR" />
    <result column="RSV2" property="rsv2" jdbcType="VARCHAR" />
    <result column="RSV3" property="rsv3" jdbcType="VARCHAR" />
    <result column="RSV4" property="rsv4" jdbcType="VARCHAR" />
    <result column="RSV5" property="rsv5" jdbcType="VARCHAR" />
    <result column="OPTSTATUS" property="optstatus" jdbcType="CHAR" />
  </resultMap>
   <select id="selectByRoleId" resultMap="SysRoleFuncResult" parameterClass="com.synesoft.fisp.domain.model.SysRoleFunc" >
    select FUNC_ID, ROLE_ID, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER, RSV1, RSV2, RSV3,
      RSV4, RSV5,OPTSTATUS
    from SYS_ROLE_FUNC
    where trim(ROLE_ID) = #roleId:VARCHAR# 
        <dynamic>
       <isNotEmpty prepend="and" property="optstatus" >
        trim(OPTSTATUS) = #optstatus:CHAR#
       </isNotEmpty>
    </dynamic>
  </select>

  <select id="selectByUser" resultMap="SysRoleFuncResult" parameterClass="com.synesoft.fisp.domain.model.UserRoleInf" >
    select f.* from sys_role_func f join SYS_USER_ROLE_INF r on(trim(f.role_id)=trim(r.roleid)) 
    where trim(r.orgid) = #orgid:CHAR# 
    and trim(r.userid) = #userid:CHAR#
  </select>
  
  <select id="selectByRoleNoOrg" resultMap="SysRoleFuncResult" parameterClass="com.synesoft.fisp.domain.model.UserRoleInf" >
    select f.* from sys_role_func f join SYS_USER_ROLE r on(trim(f.role_id)=trim(r.roleid)) 
    and trim(r.userid) = #userid:CHAR#
  </select>

  <insert id="insert" parameterClass="com.synesoft.fisp.domain.model.SysRoleFunc" >
    insert into SYS_ROLE_FUNC (FUNC_ID, ROLE_ID, CREATE_TIME, CREATE_USER, UPDATE_TIME, UPDATE_USER,
     	RSV1, RSV2, RSV3,RSV4, RSV5,OPTSTATUS)
    values (#funcId:CHAR#, #roleId:VARCHAR#, #createTime:VARCHAR#, #createUser:VARCHAR#,
      #updateTime:CHAR#, #updateUser:VARCHAR#, 
      #rsv1:CHAR#, #rsv2:VARCHAR#, #rsv3:VARCHAR#, #rsv4:VARCHAR#, #rsv5:VARCHAR#,#optstatus:CHAR#)
  </insert>
     <delete id="deleteByPrimaryKey" parameterClass="com.synesoft.fisp.domain.model.SysRoleFunc" >
    delete from SYS_ROLE_FUNC
   	where trim(ROLE_ID) = #roleId:VARCHAR#
  </delete>
  <update id="updateByPrimaryKeySelective" parameterClass="com.synesoft.fisp.domain.model.SysRoleFunc" >
    update SYS_ROLE_FUNC
    <dynamic prepend="set" >
      <isNotNull prepend="," property="updateUser" >
        UPDATE_USER = #updateUser:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="updateTime" >
        UPDATE_TIME = #updateTime:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="optstatus" >
        OPTSTATUS = #optstatus:CHAR#
      </isNotNull>
    </dynamic>
    where trim(ROLE_ID) = #roleId:CHAR#
  </update>
</sqlMap>