<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="DP_IMP_CFG_DTL" >
  <resultMap id="abatorgenerated_DpImpCfgDtlResult" class="com.synesoft.fisp.domain.model.DpImpCfgDtl" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Mon Nov 11 15:55:49 CST 2013.
    -->
    <result column="IMP_DTL_ID" property="impDtlId" jdbcType="VARCHAR" />
    <result column="IMP_ID" property="impId" jdbcType="VARCHAR" />
    <result column="FIELD_NAME" property="fieldName" jdbcType="VARCHAR" />
    <result column="COL_NAME" property="colName" jdbcType="VARCHAR" />
    <result column="RSV1" property="rsv1" jdbcType="VARCHAR" />
    <result column="RSV2" property="rsv2" jdbcType="VARCHAR" />
    <result column="RSV3" property="rsv3" jdbcType="VARCHAR" />
    <result column="RSV4" property="rsv4" jdbcType="VARCHAR" />
    <result column="RSV5" property="rsv5" jdbcType="VARCHAR" />
  </resultMap>
  
  <resultMap id="DpImpCfgDtlResultEx" class="com.synesoft.fisp.domain.model.vo.DpImpCfgDtlVO" >
    <result column="IMP_DTL_ID" property="impDtlId" jdbcType="VARCHAR" />
    <result column="IMP_ID" property="impId" jdbcType="VARCHAR" />
    <result column="FIELD_NAME" property="fieldName" jdbcType="VARCHAR" />
    <result column="COL_NAME" property="colName" jdbcType="VARCHAR" />
    <result column="RSV1" property="rsv1" jdbcType="VARCHAR" />
    <result column="RSV2" property="rsv2" jdbcType="VARCHAR" />
    <result column="RSV3" property="rsv3" jdbcType="VARCHAR" />
    <result column="RSV4" property="rsv4" jdbcType="VARCHAR" />
    <result column="RSV5" property="rsv5" jdbcType="VARCHAR" />
    <result column="COL_LEN" property="colLen" jdbcType="VARCHAR" />
    <result column="FIELD_LEN" property="fieldLen" jdbcType="DECIMAL" />
  </resultMap>
  
  <!-- query a piece of record -->
  <select id="selectByPrimaryKey" 
  		parameterClass="java.lang.String" resultMap="abatorgenerated_DpImpCfgDtlResult">
	SELECT 
		IMP_DTL_ID, IMP_ID, FIELD_NAME, COL_NAME, RSV1, RSV2, RSV3, RSV4, RSV5
	FROM
		DP_IMP_CFG_DTL
	WHERE
		IMP_DTL_ID = #value:VARCHAR#	  
  </select>
  
  <!-- query list -->
  <select id="selectQueryList" 
  		parameterClass="java.lang.String" resultMap="DpImpCfgDtlResultEx">
	SELECT DISTINCT
		DP_IMP_CFG_DTL.IMP_DTL_ID, DP_IMP_CFG_DTL.IMP_ID, DP_IMP_CFG_DTL.FIELD_NAME, 
		DP_IMP_CFG_DTL.COL_NAME, DP_IMP_CFG_DTL.RSV1, DP_IMP_CFG_DTL.RSV2, 
		DP_IMP_CFG_DTL.RSV3, DP_IMP_CFG_DTL.RSV4, DP_IMP_CFG_DTL.RSV5,
		A.COL_LEN, DP_FILE_DTL.FIELD_LEN
	FROM
		DP_IMP_CFG_DTL
	LEFT JOIN
	    DP_IMP_CFG ON
	    DP_IMP_CFG.IMP_ID = DP_IMP_CFG_DTL.IMP_ID
	LEFT JOIN
		(SELECT 
			DP_TABLE.TABLE_ID, DP_TABLE.TABLE_NAME, DP_TABLE_DTL.COL_NAME, DP_TABLE_DTL.COL_LEN
		FROM
			DP_TABLE_DTL
		INNER JOIN
			DP_TABLE ON
	    	DP_TABLE.TABLE_ID = DP_TABLE_DTL.TABLE_ID
	    ) A ON
		DP_IMP_CFG.TABLE_NAME = A.TABLE_NAME AND
		DP_IMP_CFG_DTL.COL_NAME = A.COL_NAME
	LEFT JOIN
		DP_FILE_DTL ON
		DP_IMP_CFG_DTL.FIELD_NAME = DP_FILE_DTL.FIELD_NAME AND
    	DP_IMP_CFG.FILE_ID = DP_FILE_DTL.FILE_ID
	WHERE
		DP_IMP_CFG_DTL.IMP_ID = #value:VARCHAR#	  
  </select>
  
  <!-- delete records -->
  <delete id="deleteByPrimaryKey" 
  		parameterClass="java.lang.String">
	DELETE FROM
		DP_IMP_CFG_DTL
	WHERE	
		IMP_ID = #value:VARCHAR#
  </delete>
  
  <insert id="insert" 
  		parameterClass="com.synesoft.fisp.domain.model.DpImpCfgDtl">
	INSERT INTO
		DP_IMP_CFG_DTL
	(
		IMP_DTL_ID, IMP_ID, FIELD_NAME, COL_NAME, 
		RSV1, RSV2, RSV3, RSV4, RSV5
	) VALUES (
		#impDtlId:VARCHAR#, #impId:VARCHAR#, #fieldName:VARCHAR#, #colName:VARCHAR#, 
		#rsv1:VARCHAR#, #rsv2:VARCHAR#, #rsv3:VARCHAR#, #rsv4:VARCHAR#, #rsv5:VARCHAR#
	)	
  </insert>
  
</sqlMap>