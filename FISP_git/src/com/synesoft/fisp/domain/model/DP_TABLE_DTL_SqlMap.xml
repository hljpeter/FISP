<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="DP_TABLE_DTL" >
  <resultMap id="abatorgenerated_DpTableDtlResult" class="com.synesoft.fisp.domain.model.DpTableDtl" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Tue Nov 12 09:56:07 CST 2013.
    -->
    <result column="COL_ID" property="colId" jdbcType="VARCHAR" />
    <result column="TABLE_ID" property="tableId" jdbcType="VARCHAR" />
    <result column="COL_SEQ_NO" property="colSeqNo" jdbcType="DECIMAL" />
    <result column="COL_NAME" property="colName" jdbcType="VARCHAR" />
    <result column="COL_DESC" property="colDesc" jdbcType="VARCHAR" />
    <result column="COL_TYPE" property="colType" jdbcType="VARCHAR" />
    <result column="COL_LEN" property="colLen" jdbcType="VARCHAR" />
    <result column="COMMENTS" property="comments" jdbcType="VARCHAR" />
    <result column="RSV1" property="rsv1" jdbcType="VARCHAR" />
    <result column="RSV2" property="rsv2" jdbcType="VARCHAR" />
    <result column="RSV3" property="rsv3" jdbcType="VARCHAR" />
    <result column="RSV4" property="rsv4" jdbcType="VARCHAR" />
    <result column="RSV5" property="rsv5" jdbcType="VARCHAR" />
  </resultMap>
  
  <!-- query a piece of record -->
  <select id="selectByPrimaryKey" 
  		parameterClass="java.lang.String" resultMap="abatorgenerated_DpTableDtlResult">
	SELECT 
		COL_ID, TABLE_ID, COL_SEQ_NO, COL_NAME, COL_DESC, COL_TYPE, COL_LEN, COMMENTS, RSV1,
      	RSV2, RSV3, RSV4, RSV5
	FROM
		DP_TABLE_DTL
	WHERE
		COL_ID = #value:VARCHAR#	  
  </select>
  
  <!-- query list -->
  <select id="selectQueryList" 
  		parameterClass="java.lang.String" resultMap="abatorgenerated_DpTableDtlResult">
	SELECT 
		COL_ID, TABLE_ID, COL_SEQ_NO, COL_NAME, COL_DESC, COL_TYPE, COL_LEN, COMMENTS, RSV1,
      	RSV2, RSV3, RSV4, RSV5
	FROM
		DP_TABLE_DTL
    <dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="value" >
			TABLE_ID = #value:VARCHAR#
		</isNotEmpty>
	</dynamic>
	ORDER BY 
		COL_SEQ_NO
  </select>
  
  <!-- query size of list -->
  <select id="selectQueryCounts" 
  		parameterClass="java.lang.String" resultClass="java.lang.Integer">
	SELECT 
		COUNT(*)
	FROM
		DP_TABLE_DTL
    <dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="value" >
			TABLE_ID = #value:VARCHAR#
		</isNotEmpty>
	</dynamic>
	ORDER BY 
		COL_SEQ_NO
  </select>
  
  <!-- query list for name -->
  <select id="selectList" 
  		parameterClass="java.lang.String" resultMap="abatorgenerated_DpTableDtlResult">
	SELECT DISTINCT 
		DP_TABLE_DTL.COL_ID, DP_TABLE_DTL.TABLE_ID, DP_TABLE_DTL.COL_SEQ_NO, 
		DP_TABLE_DTL.COL_NAME, DP_TABLE_DTL.COL_DESC, DP_TABLE_DTL.COL_TYPE, 
		DP_TABLE_DTL.COL_LEN, DP_TABLE_DTL.COMMENTS, DP_TABLE_DTL.RSV1, 
		DP_TABLE_DTL.RSV2, DP_TABLE_DTL.RSV3, DP_TABLE_DTL.RSV4, DP_TABLE_DTL.RSV5
	FROM
		DP_TABLE_DTL
	INNER JOIN	
		DP_TABLE ON
		DP_TABLE_DTL.TABLE_ID = DP_TABLE.TABLE_ID
    <dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="value" >
			DP_TABLE.TABLE_NAME = #value:VARCHAR#
		</isNotEmpty>
	</dynamic>
	ORDER BY 
		DP_TABLE_DTL.COL_SEQ_NO
  </select>
  
  <!-- query map for name -->
  <select id="selectMap" 
  		parameterClass="java.lang.String" resultClass="java.util.HashMap">
	SELECT DISTINCT 
		DP_TABLE_DTL.COL_NAME, DP_TABLE_DTL.COL_LEN
	FROM
		DP_TABLE_DTL
	INNER JOIN	
		DP_TABLE ON
		DP_TABLE_DTL.TABLE_ID = DP_TABLE.TABLE_ID
    <dynamic prepend="WHERE">
		<isNotEmpty prepend="AND" property="value" >
			DP_TABLE.TABLE_NAME = #value:VARCHAR#
		</isNotEmpty>
	</dynamic>
	ORDER BY 
		DP_TABLE_DTL.COL_NAME
  </select>
  
  <!-- query not used list for name -->
  <select id="selectListForm" 
  		parameterClass="java.lang.String" resultMap="abatorgenerated_DpTableDtlResult">
	SELECT DISTINCT 
		DP_TABLE_DTL.COL_ID, DP_TABLE_DTL.TABLE_ID, DP_TABLE_DTL.COL_SEQ_NO, 
		DP_TABLE_DTL.COL_NAME, DP_TABLE_DTL.COL_DESC, DP_TABLE_DTL.COL_TYPE, 
		DP_TABLE_DTL.COL_LEN, DP_TABLE_DTL.COMMENTS, DP_TABLE_DTL.RSV1, 
		DP_TABLE_DTL.RSV2, DP_TABLE_DTL.RSV3, DP_TABLE_DTL.RSV4, DP_TABLE_DTL.RSV5
	FROM
		DP_TABLE_DTL
	INNER JOIN	
		DP_TABLE ON
		DP_TABLE_DTL.TABLE_ID = DP_TABLE.TABLE_ID
	LEFT JOIN
		DP_IMP_CFG_DTL ON
		DP_IMP_CFG_DTL.COL_NAME = DP_TABLE_DTL.COL_NAME
    WHERE
    	DP_IMP_CFG_DTL.COL_NAME IS NULL
		<isNotEmpty prepend="AND" property="value" >
			DP_TABLE.TABLE_NAME = #value:VARCHAR#
		</isNotEmpty>
	ORDER BY 
		DP_TABLE_DTL.COL_SEQ_NO
  </select>
  
  <!-- delete records -->
  <delete id="deleteByPrimaryKey" 
  		parameterClass="java.lang.String">
	DELETE FROM
		DP_TABLE_DTL
	WHERE	
		TABLE_ID = #value:VARCHAR#
  </delete>
  
  <!-- insert a piece of record -->
  <insert id="insert" 
  		parameterClass="com.synesoft.fisp.domain.model.DpTableDtl">
	INSERT INTO
		DP_TABLE_DTL
	(
		COL_ID, TABLE_ID, COL_SEQ_NO, COL_NAME, COL_DESC, 
		COL_TYPE, COL_LEN, COMMENTS, RSV1, RSV2, 
		RSV3, RSV4, RSV5
	) VALUES (
		#colId:VARCHAR#, #tableId:VARCHAR#, #colSeqNo:DECIMAL#, #colName:VARCHAR#, #colDesc:VARCHAR#,
      	#colType:VARCHAR#, #colLen:VARCHAR#, #comments:VARCHAR#, #rsv1:VARCHAR#, #rsv2:VARCHAR#, 
      	#rsv3:VARCHAR#, #rsv4:VARCHAR#, #rsv5:VARCHAR#
	)	
  </insert>
  
    <select id="selectListByTableId" parameterClass="com.synesoft.fisp.domain.model.DpTable"
		resultMap="abatorgenerated_DpTableDtlResult">
		select * from DP_TABLE_DTL
		where TABLE_ID = (select TABLE_ID from DP_TABLE where TABLE_NAME = #tableName:VARCHAR#)
		order by COL_SEQ_NO
	</select>
  
</sqlMap>